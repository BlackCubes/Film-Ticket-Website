extends base

block append head
  script(src='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.js')
  link(href='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css' rel='stylesheet')
  //- script(src='/js/mapbox.js')

block content
  main.main
    section.section-theater-header
      .heading-box
        .heading-box__background
          .heading-box__background-overlay &nbsp;
          img.heading-box__background-img(src=`/img/theaters/${theater.photo}`, alt=`${theater.name}`)
        .heading-box__logo
          img.heading-box__poster-img(src=`/img/theaters/${theater.photo}`, alt=`${theater.name}`)
        .heading-box__theater-data-container
          .heading-box__title
            h2.heading-secondary= theater.name
          .heading-box__metadata-container
            ul.heading-box__metadata
              li.heading-box__metadata-item.paragraph= `${theater.address}, ${theater.city}, ${theater.state} ${theater.zipCode}`
              li.heading-box__metadata-item.paragraph= `${theater.phone}`
        .heading-box__theater-info-container
          .heading-box__overview
            - var showtimeAns = (theater.hasShowTimes === true) ? 'Yes' : 'No'
            - var ticketAns = (theater.isTicketing === true) ? 'Yes' : 'No'
            p.paragraph= `A ${theater.chainName} chain. Has showtimes: ${showtimeAns}. Has tickets: ${ticketAns}.`
          .heading-box__buy
            a.btn.btn__promo(href="#showtimes") See showtimes

    section.section-theater-location
      .location-box
        .location-box__title.u-margin-top-small.u-margin-bottom-small
          h2.heading-secondary Location
        .location-box__map.map-container
          // Possibly fix what it shows?
          - const theaterArrObj = [{ geo: theater.geo, name: theater.name }]
          #map(data-locations=`${JSON.stringify(theaterArrObj)}`)

    section.section-theater-showtimes(id='showtimes')
      .showtimes-box
        .showtimes-box__title.u-margin-top-small.u-margin-bottom-small
          h2.heading-secondary Showtimes
        .showtimes-box__theatertime-container.u-center-text
          each showtime in theater.showtimes
            .showtimes-box__theatertime
              .showtimes-box__theatertime-poster
                img.showtimes-box__theatertime-poster-img(src=`/img/shows/${showtime.shows[0].poster.urlLarge}`, alt=`${showtime.shows[0].title}`)
              .showtimes-box__theatertime-theater.u-margin-bottom-small
                // FIX BEM
                h3.showtimes-box__theatertime-theater-name.heading-tertiary= showtime.shows[0].title
              .showtimes-box__theatertime-date
                p.paragraph= `${showtime.startDateTime.toLocaleString('en-us', {month: 'long', day: 'numeric', year: 'numeric'})}`
              .showtimes-box__theatertime-time
                p.paragraph= `${showtime.startDateTime.toLocaleString('en-us', {hour: '2-digit', minute: '2-digit', hour12: true})} - ${showtime.endDateTime.toLocaleString('en-us', {hour: '2-digit', minute: '2-digit', hour12: true})}`
            .showtimes-box__ticket-buy
              // Fix the Btn Helpers in SCSS
              a.btn.btn__promo(href="#") Buy

    section.section-theater-about
      .about-box
        .about-box__title.u-margin-top-small.u-margin-bottom-small
          h2.heading-secondary About
        .about-box__description
          p.paragraph= theater.description